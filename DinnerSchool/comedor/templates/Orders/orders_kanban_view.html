{% extends "main.html" %} {% load static %} {% block content %}
<div
  class="bg-white p-6 md:p-8 rounded-lg shadow-xl w-full border-t-8 border-primary-red mb-8"
>
  <div
    class="flex flex-col md:flex-row items-start md:items-center justify-between mb-6"
  >
    <div class="flex items-center mb-4 md:mb-0">
      <img
        src="{% static 'img/logos/logo.png' %}"
        alt="Logo de la Cafetería Certo"
        class="w-12 h-12 md:w-16 md:h-16 rounded-full border-2 border-primary-red p-1 object-cover mr-4"
      />
      <h1 class="text-2xl md:text-3xl font-bold text-gray-800">
        Gestión de Pedidos
      </h1>
      <div
        id="user-id-data"
        data-user-id="{{ user.id }}"
        style="display: none"
      ></div>
    </div>
    <a
      href="/core/dashboard"
      class="px-4 py-2 text-sm font-medium text-white bg-gray-600 rounded-md hover:bg-gray-700 transition duration-300 ease-in-out md:self-end"
    >
      Volver
    </a>
  </div>

  <!-- Contenedor principal con grid para las columnas del kanban -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
    <!-- Columna Pendiente -->
    <div
      id="pendiente-column"
      class="kanban-column bg-gray-100 p-4 rounded-lg shadow-custom flex flex-col items-center justify-start min-h-[300px]"
      ondragover="allowDrop(event)"
      ondrop="drop(event)"
      ondragleave="dragLeave(event)"
    >
      <h2 class="text-xl font-semibold text-gray-800 mb-4 text-center">
        Pendiente
      </h2>
      <div id="pendiente-cards" class="space-y-4 w-full">
        {% for order in orders %} {% if order.status == 'pendiente' %} {%include
        'Orders/order_card_grouped.html' with order=order %} {% endif %}
        {%endfor %}
      </div>
    </div>

    <!-- Columna En Preparación -->
    <div
      id="en-preparacion-column"
      class="kanban-column bg-yellow-100 p-4 rounded-lg shadow-custom flex flex-col items-center justify-start min-h-[300px]"
      ondragover="allowDrop(event)"
      ondrop="drop(event)"
      ondragleave="dragLeave(event)"
    >
      <h2 class="text-xl font-semibold text-gray-800 mb-4 text-center">
        En Preparación
      </h2>
      <div id="en-preparacion-cards" class="space-y-4 w-full">
        {% for order in orders %} {% if order.status == 'en preparacion' %}
        {%include 'Orders/order_card_grouped.html' with order=order %} {% endif
        %} {% endfor %}
      </div>
    </div>

    <!-- Columna Finalizado -->
    <div
      id="finalizado-column"
      class="kanban-column bg-blue-100 p-4 rounded-lg shadow-custom flex flex-col items-center justify-start min-h-[300px]"
      ondragover="allowDrop(event)"
      ondrop="drop(event)"
      ondragleave="dragLeave(event)"
    >
      <h2 class="text-xl font-semibold text-gray-800 mb-4 text-center">
        Finalizado
      </h2>
      <div id="finalizado-cards" class="space-y-4 w-full">
        {% for order in orders %} {% if order.status == 'finalizado' %}
        {%include 'Orders/order_card_grouped.html' with order=order %} {% endif
        %} {% endfor %}
      </div>
    </div>

    <!-- Columna Entregado -->
    <div
      id="entregado-column"
      class="kanban-column bg-green-100 p-4 rounded-lg shadow-custom flex flex-col items-center justify-start min-h-[300px]"
      ondragover="allowDrop(event)"
      ondrop="drop(event)"
      ondragleave="dragLeave(event)"
    >
      <h2 class="text-xl font-semibold text-gray-800 mb-4 text-center">
        Entregado
      </h2>
      <div id="entregado-cards" class="space-y-4 w-full">
        {% for order in orders %} {% if order.status == 'entregado' %} {%include
        'Orders/order_card_grouped.html' with order=order %} {% endif %}
        {%endfor %}
      </div>
    </div>
  </div>
</div>

<script src="{% static 'js/kanban.js' %}"></script>
{% endblock %}
